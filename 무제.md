:smile

  

# 11장: 에이전트 디자인 패턴 개요

## 📌 11.1 에이전트 디자인 패턴의 개요

이 장에서는 AI 에이전트 개발에서 마주치는 다양한 문제에 대한 효과적인 설계 방법을 제안하는 **에이전트 디자인 패턴**에 대해 다룹니다. 디자인 패턴은 소프트웨어 설계에서 자주 발생하는 문제에 대한 재사용 가능한 해결책을 의미하며, 경험 많은 개발자들이 오랜 실무를 통해 발견하고 정리한 '베스트 프랙티스'입니다.

에이전트 디자인 패턴은 Yue Lai 등이 제안한 "에이전트 디자인 패턴 카탈로그"에 기반하며, 크게 4가지 과제 영역에 대응합니다.

### 1. 목표 설정과 계획 생성

사용자의 모호한 입력이나 요구에서 구체적인 목표를 추출하고, 이를 달성하기 위한 행동 계획을 생성하는 데 초점을 맞춥니다. 에이전트가 사용자의 의도를 정확히 이해하고 효과적인 행동 계획을 세울 수 있도록 돕습니다.

**주요 패턴:**

- **패시브 골 크리에이터 (Passive Goal Creator)**: 사용자 입력에서 구체적인 목표를 추출합니다. (예: "주말 여행 계획 세워줘" -> "가족이 즐길 수 있는 여행 계획 세우기")
    
- **프로액티브 골 크리에이터 (Proactive Goal Creator)**: 환경이나 상황 정보를 활용하여 능동적으로 목표를 생성합니다. (예: 날씨, 캘린더 등을 고려한 알람 설정)
    
- **프롬프트/응답 옵티마이저 (Prompt/Response Optimizer)**: 프롬프트와 LLM의 응답을 최적화하여 더 높은 품질의 답변을 얻습니다.
    
- **싱글 패스 플랜 제너레이터 (Single-Path Plan Generator)**: 단일 경로의 구체적인 행동 계획을 순차적으로 생성합니다.
    
- **멀티 패스 플랜 제너레이터 (Multi-Path Plan Generator)**: 여러 실행 계획을 생성하고 그 중 최적의 행동을 선택합니다.
    
- **원샷 모델 쿼리 (One-Shot Model Querying)**: 단일 LLM 호출로 행동 계획을 생성합니다.
    
- **인크리멘탈 모델 쿼리 (Incremental Model Querying)**: 여러 차례 LLM 호출을 통해 단계적으로 계획을 생성합니다.
    

### 2. 추론의 확실성 향상

에이전트의 추론이나 판단의 정확성을 높이는 데 초점을 맞춥니다. LLM 출력의 신뢰성을 향상시키고, 잘못된 판단이나 부적절한 응답을 줄이는 것이 목적입니다.

**주요 패턴:**

- **검색 증강 생성 (Retrieval-Augmented Generation, RAG)**: 에이전트가 보유하지 않은 정보를 외부 환경에서 가져와 생성에 활용합니다.
    
- **셀프 리플렉션 (Self-Reflection)**: 에이전트가 자신의 출력을 평가하고 스스로 수정합니다.
    
- **크로스 리플렉션 (Cross-Reflection)**: 다른 에이전트나 LLM이 평가를 수행하여 바이어스를 줄입니다.
    
- **휴먼 리플렉션 (Human-Reflection)**: 인간으로부터의 피드백을 바탕으로 평가를 수행합니다.
    
- **에이전트 평가기 (Agent Evaluator)**: 에이전트의 작동을 평가하고 그 결과를 피드백합니다.
    

### 3. 에이전트 간의 협력

여러 에이전트가 협력함으로써 복잡한 태스크를 해결할 수 있도록 하는 데 초점을 맞춥니다. 복잡한 태스크를 분할하고, 전문화된 에이전트들이 협력하여 작업함으로써 더 효율적이고 고품질의 문제 해결을 실현합니다.

**주요 패턴:**

- **투표 기반 협력 (Voting-Based Cooperation)**: 여러 에이전트가 독립적으로 판단/제안하고, 그 결과를 투표로 집계하여 최종 의사결정을 합니다.
    
- **역할 기반 협력 (Role-Based Cooperation)**: 에이전트들이 각자 역할을 분담하고 전문성을 살려 협력 작업을 수행합니다.
    
- **토론 기반 협력 (Debate-Based Cooperation)**: 에이전트들이 대화 형식으로 의견을 교환하고 합의 형성을 통해 문제 해결을 합니다.
    

### 4. 입출력 제어

AI 에이전트와 외부(사용자나 다른 시스템) 간의 상호작용을 적절히 관리하는 데 초점을 맞춥니다. 에이전트에 대한 입력의 적절한 처리, 출력의 제어, 그리고 고급 도구를 활용할 수 있게 함으로써 복잡한 태스크를 달성하는 것을 목적으로 합니다.

**주요 패턴:**

- **멀티모달 가드레일 (Multimodal Guardrails)**: 텍스트, 이미지, 음성 등 다양한 형식의 입력에 대해 유해한 입력이 아닌지, 윤리적 기준을 충족하는지 등을 검증하고 제어합니다.
    
- **도구/에이전트 레지스트리 (Tool/Agent Registry)**: 에이전트가 이용 가능한 도구나 서브 에이전트를 일원화하여 관리하고, 필요에 따라 적절한 것을 선택/호출합니다.
    
- **에이전트 어댑터 (Agent Adapter)**: AI 에이전트와 외부 도구 및 시스템 간의 인터페이스를 제공합니다.
    

## 📌 11.2 18가지 에이전트 디자인 패턴 상세 설명

### 에이전트 디자인 패턴의 전체도

에이전트 디자인 패턴은 개발자에 의한 AI 에이전트의 설계, 사용자로부터의 프롬프트를 시작으로 한 에이전트의 작동 흐름, 그리고 그 작동 흐름과 관련된 패턴을 도식화한 것입니다. 에이전트의 역할을 '조정자로서의 에이전트(Agent-as-a-coordinator)'와 '작업자로서의 에이전트(Agent-as-a-worker)'로 크게 분류합니다.

### 1. 패시브 골 크리에이터 (Passive Goal Creator)

- **개요**: AI 에이전트가 사용자의 요구를 적절히 처리하기 위해, 사용자의 모호한 입력에서 구체적인 목표를 추출하는 패턴입니다.
    
- **작동 절차**:
    
    1. 사용자로부터 텍스트 입력을 받습니다.
        
    2. LLM을 이용해 입력 텍스트를 처리하고, 사용자의 요구를 식별합니다.
        
    3. 식별된 목표를 에이전트가 처리할 수 있는 구조화된 데이터로 변환합니다.
        
    4. 필요에 따라 목표의 우선순위나 관계를 설정합니다.
        
    5. 구조화된 목표를 에이전트의 다음 처리 단계로 전달합니다.
        
- **특징**: 사용자가 제공한 정보만을 기반으로 작동하며, 명시적으로 언급되지 않은 요소(예산, 이동 수단 등)는 추출하지 않습니다.
    
- **관련 패턴**: 프로액티브 골 크리에이터, 프롬프트/응답 옵티마이저, 싱글 패스 플랜 제너레이터 등.
    

### 2. 프로액티브 골 크리에이터 (Proactive Goal Creator)

- **개요**: AI 에이전트가 사용자의 명시적인 요구뿐만 아니라, 사용자를 둘러싼 환경을 이해하고 선제적으로 대응하여 능동적인 목표 설정을 실현하기 위한 패턴입니다.
    
- **작동 절차**:
    
    1. 사용자의 입력이나 명시적인 요구를 받습니다.
        
    2. 사용자의 과거 행동 이력, 현재 상황(시간, 장소 등), 외부 정보(날씨, 이벤트 정보 등)를 수집합니다.
        
    3. 수집한 정보를 분석하여 사용자가 명시하지 않은 잠재적 니즈나 목표를 식별합니다.
        
    4. 식별된 요소를 바탕으로 추가 목표나 고려 사항을 생성합니다.
        
    5. 생성된 추가 목표를 사용자의 명시적 요구와 통합합니다.
        
    6. 통합된 목표 세트를 에이전트의 다음 처리 단계로 전달합니다.
        
- **특징**: 광범위한 정보원에서 상황을 분석하고, 선제적으로 목표를 설정합니다. 지나치게 적극적인 목표 설정은 사용자 의도와 괴리가 생길 수 있으므로 균형이 중요합니다.
    
- **관련 패턴**: 패시브 골 크리에이터, 검색 증강 생성, 멀티모달 가드레일 등.
    

### 3. 프롬프트/응답 옵티마이저 (Prompt/Response Optimizer)

- **개요**: AI 에이전트와 LLM 간의 프롬프트를 통한 상호작용을 더 효과적으로 만들기 위한 패턴입니다. LLM에 입력하는 프롬프트의 품질은 LLM 성능에 크게 의존합니다.
    
- **작동 절차**:
    
    1. 원래의 프롬프트나 LLM의 응답을 받습니다.
        
    2. 프롬프트의 구조나 내용을 분석하고, 태스크의 특성이나 목적에 따라 선택하거나 수정합니다.
        
    3. LLM에 최적화된 프롬프트의 정보를 생성합니다.
        
    4. 생성된 프롬프트를 LLM에 입력하여 응답을 얻습니다.
        
    5. LLM의 응답을 평가하고 필요에 따라 응답 최적화를 수행합니다.
        
- **특징**: 목표 추출 자체를 수행하지 않고, 추출된 목표나 사용자 요구를 LLM이 처리하기에 가장 효과적인 형태로 변환하는 역할을 합니다.
    
- **관련 패턴**: 패시브 골 크리에이터, 프로액티브 골 크리에이터, 원샷 모델 쿼리, 셀프 리플렉션 등.
    

### 4. 검색 증강 생성 (Retrieval-Augmented Generation, RAG)

- **개요**: LLM이 가진 지식의 한계(특히 최신 정보나 전문적인 지식)를 극복하기 위해, LLM의 생성 능력과 외부 정보원에서의 검색을 조합하여 답변을 생성하는 패턴입니다.
    
- **작동 절차**:
    
    1. 사용자로부터 질문이나 요청을 받습니다.
        
    2. 질문에서 검색 쿼리를 생성합니다.
        
    3. 생성된 쿼리를 사용하여 외부 정보원(데이터베이스, 파일, 웹상의 문서 등)에서 관련 정보를 검색합니다.
        
    4. 검색 결과를 필터링하고 가장 관련성이 높은 정보를 선택합니다.
        
    5. 선택된 정보와 원래 질문을 조합하여 새로운 프롬프트를 작성합니다.
        
    6. 작성된 프롬프트를 LLM에 입력하고 답변을 생성합니다.
        
    7. 필요에 따라 생성된 답변의 사실 확인이나 보충을 수행합니다.
        
- **특징**: LLM의 지식을 온디맨드로 확장하여 최신 정보나 전문 지식을 필요로 하는 질문에 정확하고 적절한 답변을 제공합니다.
    
- **관련 패턴**: 프로액티브 골 크리에이터, 프롬프트/응답 옵티마이저, 셀프 리플렉션 등.
    

### 5. 싱글 패스 플랜 제너레이터 (Single-Path Plan Generator)

- **개요**: 사용자의 목표를 달성하기 위한 일련의 구체적인 단계나 행동 계획을 생성하는 패턴입니다. 비교적 단순한 태스크나 명확한 절차가 존재하는 문제에 효과적입니다.
    
- **작동 절차**:
    
    1. 사용자 요청을 입력으로 받습니다.
        
    2. 목표 달성에 필요한 단계를 순서대로 생성합니다.
        
    3. 각 단계의 실행에 필요한 상세 정보나 주의사항을 추가합니다.
        
    4. 생성된 계획 전체를 검토하고 사용자에게 제시합니다.
        
- **특징**: 단일 실행 경로를 생성하며, 각 단계의 상세함과 예상치 못한 상황에 대한 대응을 고려해야 합니다.
    
- **관련 패턴**: 멀티 패스 플랜 제너레이터(대조적), 패시브/프로액티브 골 크리에이터, 프롬프트/응답 옵티마이저 등.
    

### 6. 멀티 패스 플랜 제너레이터 (Multi-Path Plan Generator)

- **개요**: 여러 선택지나 조건 분기를 포함한 복잡한 계획을 생성하기 위한 패턴입니다. 불확실성이 높은 상황이나 사용자의 취향/외부 요인에 따라 계획이 바뀔 가능성이 있는 경우에 특히 효과적입니다.
    
- **작동 절차**:
    
    1. 사용자 목표나 요구 사항, 관련 변수를 입력으로 받습니다.
        
    2. 주요 분기점이나 의사결정 포인트를 식별합니다.
        
    3. 각 분기점에서의 선택지를 생성합니다.
        
    4. 선택지에 따라 이후의 행동 계획을 생성합니다.
        
    5. 각 선택지의 장점, 단점, 조건 등을 생성합니다.
        
    6. 생성된 여러 계획을 통합하고 트리 구조로 정리합니다.
        
    7. 사용자나 에이전트 자신이 판단을 하기 쉽도록 계획을 구조화하여 제시합니다.
        
- **특징**: 단일 실행 계획만 생성하는 싱글 패스 플랜 제너레이터와 달리, 여러 다른 경로가 발생할 수 있습니다.
    
- **관련 패턴**: 프로액티브 골 크리에이터, 검색 증강 생성, 셀프 리플렉션, 휴먼 리플렉션 등.
    

### 7. 셀프 리플렉션 (Self-Reflection)

- **개요**: 에이전트가 자신의 출력이나 추론 과정을 평가하고, 필요에 따라 스스로 수정을 수행하는 패턴입니다. 이 평가 결과는 데이터베이스 등에 저장되어 다음에 유사한 태스크를 실행할 때 참고 자료로 활용됩니다.
    
- **작동 절차**:
    
    1. AI 에이전트가 초기 답변이나 판단을 생성합니다.
        
    2. 생성된 결과에 대해 사전 정의된 평가 기준이나 저장된 교훈에 기반하여 피드백을 수행합니다.
        
    3. 에이전트가 피드백을 분석하고 문제점이나 개선점을 파악합니다.
        
    4. 파악된 문제점이나 개선점을 기억 메모리에 저장합니다(향후 교훈으로 삼기 위함).
        
    5. 생성된 답변이나 판단을 파악된 문제에 기반하여 수정합니다.
        
    6. 필요에 따라 이 프로세스를 반복합니다.
        
    7. 개선된 결과를 사용자에게 제시합니다.
        
- **특징**: AI 에이전트가 자기평가와 수정 과정을 통해 성능을 향상시키며, 과거의 교훈을 활용하여 작동합니다.
    
- **관련 패턴**: 프롬프트/응답 옵티마이저, 검색 증강 생성, 멀티 패스 플랜 제너레이터, 크로스 리플렉션 등.
    

### 8. 크로스 리플렉션 (Cross-Reflection)

- **개요**: 여러 에이전트나 다른 LLM 등이 서로의 출력을 평가하고 피드백을 제공하는 패턴입니다. 단일 AI 에이전트로는 파악하기 어려운 다양한 관점이나 문맥을 도입하여 전체적인 관점이 고려된 신뢰성 높은 결과를 얻는 것을 목적으로 합니다.
    
- **작동 절차**:
    
    1. 주요 에이전트가 초기 답변이나 판단을 생성합니다.
        
    2. 생성된 결과를 다른 전문성/관점을 가진 다른 에이전트나 LLM에 함께 제시합니다.
        
    3. 다른 에이전트가 초기 결과를 평가하고 피드백을 수행합니다.
        
    4. 피드백을 통합하여 답변이나 판단의 문제점과 개선점을 파악합니다.
        
    5. 파악된 문제점이나 개선점을 메모리에 저장하고 향후 리플렉션에 활용합니다.
        
    6. 생성된 답변이나 판단을 파악된 문제에 기반하여 수정합니다.
        
    7. 필요에 따라 이 프로세스를 여러 번 반복합니다.
        
    8. 개선된 결과와 각 에이전트의 주요 고려 사항을 사용자에게 제시합니다.
        
- **특징**: 동일 모델의 바이어스에 대처하고, 비용 효율적인 접근 방식(성능이 낮은 모델로 실행하고 리플렉션은 성능이 높은 모델로 실행)을 가능하게 합니다.
    
- **관련 패턴**: 셀프 리플렉션, 프롬프트/응답 옵티마이저, 검색 증강 생성, 휴먼 리플렉션 등.
    

### 9. 휴먼 리플렉션 (Human-Reflection)

- **개요**: AI 에이전트의 출력이나 판단에 대해 인간이 직접 피드백을 제공하고, 이 피드백을 바탕으로 에이전트의 작동 성능을 향상시키는 패턴입니다. AI 에이전트 독자적으로는 하기 어려운 윤리적 판단, 문맥 이해, 창의성 평가 등에서 인간의 지혜와 경험을 활용합니다.
    
- **작동 절차**:
    
    1. AI 에이전트가 초기 답변이나 판단을 생성합니다.
        
    2. 생성된 결과를 인간 전문가나 최종 사용자에게 과거의 교훈과 함께 제시합니다.
        
    3. 인간이 결과를 평가하고 피드백을 제공합니다.
        
    4. AI 에이전트가 피드백을 분석하여 문제점이나 개선점을 파악합니다.
        
    5. 파악된 문제점이나 개선점을 기억 메모리에 저장합니다(향후 리플렉션에 활용).
        
    6. 생성된 답변이나 판단을 파악된 문제에 기반하여 수정합니다.
        
    7. 필요에 따라 이 프로세스를 여러 번 반복합니다.
        
    8. 개선된 결과를 사용자에게 제시합니다.
        
- **특징**: AI 에이전트에 인간만의 통찰이나 판단을 도입할 수 있으며, 에이전트의 출력을 실제 사용 상황에 맞게 평가하고, AI 에이전트와 인간의 협업을 추진할 수 있습니다.
    
- **관련 패턴**: 리플렉션, 크로스 리플렉션, 프롬프트/응답 옵티마이저, 멀티 패스 플랜 제너레이터 등.
    

### 10. 원샷 모델 쿼리 (One-Shot Model Querying)

- **개요**: 조정자 역할을 하는 에이전트가 수행하는 플랜 생성에서 모든 단계를 한 번의 LLM 호출로 생성하는 패턴입니다. 여러 번의 쿼리를 반복하는 것보다 한 번의 호출로 응답을 생성하는 것이 비용과 속도 면에서 유리할 때 사용합니다.
    
- **작동 절차**:
    
    1. 사용자로부터 질문이나 지시를 받습니다.
        
    2. 받은 입력에 대해 LLM의 요구에 따라 프롬프트 형식 조정을 수행합니다.
        
    3. 조정된 입력을 LLM에 전송합니다.
        
    4. LLM에서 얻은 응답을 후처리합니다.
        
    5. 후처리된 응답을 사용자에게 반환합니다.
        
- **특징**: 처리 속도가 빠르지만, 복잡한 요구사항이나 다단계 추론이 필요한 태스크에는 대응하기 어렵습니다.
    
- **관련 패턴**: 프롬프트/응답 옵티마이저, 검색 증강 생성, 패시브 골 크리에이터 등.
    

### 11. 인크리멘탈 모델 쿼리 (Incremental Model Querying)

- **개요**: 플랜 생성 프로세스의 각 단계에서 LLM에 접근하여 단계적으로 추론을 진행하는 패턴입니다. 원샷 모델 쿼리로는 기대한 품질이 나오지 않는 경우에 사용을 고려합니다.
    
- **작동 절차**:
    
    1. 사용자로부터 초기 질문이나 요청을 받습니다.
        
    2. 초기 쿼리를 생성하고 LLM에 전송합니다.
        
    3. LLM의 응답을 분석하고(에이전트에 의한 분석 또는 인간의 피드백을 통해) 추가 정보가 필요한 점이나 개선이 필요한 점을 파악합니다.
        
    4. 파악된 사항을 바탕으로 후속 쿼리를 생성합니다.
        
    5. LLM에 전송하고 추가 정보나 개선된 응답을 얻습니다.
        
    6. 필요에 따라 3~5번 단계를 반복합니다.
        
    7. 얻은 정보를 통합하여 최종 답변을 생성합니다.
        
    8. 최종 답변을 사용자에게 제시합니다.
        
- **특징**: 정보의 확장(다양한 정보 수집)에 초점을 두며, 복잡한 요구사항이나 다단계 추론에 유용합니다.
    
- **관련 패턴**: 셀프 리플렉션, 프롬프트/응답 옵티마이저, 검색 증강 생성, 휴먼 리플렉션 등.
    

### 12. 투표 기반 협력 (Voting-Based Cooperation)

- **개요**: 여러 AI 에이전트가 독립적으로 판단이나 제안을 하고, 그 결과를 투표로 집계하여 최종 의사결정을 하는 패턴입니다. 복잡한 문제에 대해 다양한 관점에서의 접근을 가능하게 하고, 개별 에이전트의 바이어스나 의사 결정 오류를 줄이는 것을 목표로 합니다.
    
- **작동 절차**:
    
    1. 문제나 과제를 여러 에이전트에 제시합니다.
        
    2. 각 에이전트가 독립적으로 답변이나 판단을 생성합니다.
        
    3. 생성된 답변이나 판단을 수집합니다.
        
    4. 사전에 정의된 규칙(다수결, 가중 투표 등)에 따라 결과를 집계합니다.
        
    5. 집계 결과에 따라 최종 판단이나 제안을 내립니다.
        
    6. 필요에 따라 최종 판단 근거나 개별 에이전트의 의견도 포함하여 결과를 제시합니다.
        
- **특징**: 개별 AI 에이전트의 약점을 보완하고 다양한 관점을 도입하며, 의사 결정 프로세스의 투명성을 높입니다.
    
- **관련 패턴**: 크로스 리플렉션, 셀프 리플렉션, 휴먼 리플렉션, 프롬프트/응답 옵티마이저 등.
    

### 13. 역할 기반 협력 (Role-Based Cooperation)

- **개요**: 여러 에이전트가 협력하여 복잡한 태스크를 해결해야 할 경우, 각 에이전트의 역할을 명확히 정의하고 각자의 전문성을 살려 협력 작업을 수행하는 패턴입니다. 인간 조직의 역할 분담을 에이전트 세계에 적용한 것입니다.
    
- **작동 절차**:
    
    1. 태스크 전체를 분석하고 필요한 역할을 정의합니다.
        
    2. 각 역할에 적합한 에이전트를 생성하거나 배정합니다.
        
    3. 에이전트 간의 정보 공유와 연계를 위한 프로토콜(규칙)을 설계합니다.
        
    4. 태스크의 실행 순서나 의존 관계를 정의합니다.
        
    5. 각 에이전트의 전문성을 활용하여 최종 성과물을 생성합니다.
        
- **특징**: 복잡한 태스크를 전문성에 따라 분류하고 효율적으로 처리하며, 고품질의 성과물을 만들어낼 수 있습니다. 인간 조직 구조를 메타 모델로 활용하여 인간과 에이전트의 혼합 시스템 구축에 용이합니다.
    
- **관련 패턴**: 크로스 리플렉션, 투표 기반 협력, 도구/에이전트 레지스트리, 프롬프트/응답 옵티마이저 등.
    

### 14. 토론 기반 협력 (Debate-Based Cooperation)

- **개요**: 여러 AI 에이전트가 대화 형식으로 의견을 교환하고, 합의 형성을 통해 문제 해결을 하는 패턴입니다. 역할 기반 협력 패턴이 작업 분담을 지향하는 것과 달리, 토론을 통한 합의 형성을 지향합니다.
    
- **작동 절차**:
    
    1. 문제나 과제를 명확히 정의합니다.
        
    2. 토론에 참여할 에이전트를 선정하고 각자의 역할이나 전문성을 설정합니다.
        
    3. 토론의 규칙과 평가 기준을 정합니다.
        
    4. 각 에이전트가 순서대로 의견을 내고 다른 의견에 대해 반론이나 보충을 합니다.
        
    5. 토론의 진행에 따라 새로운 정보나 관점을 도입합니다.
        
    6. 합의 형성 프로세스를 거쳐 최종 판단이나 해결책을 도출합니다.
        
    7. 필요에 따라 인간 전문가가 결과를 검토하고, 최종 판단을 내립니다.
        
- **특징**: 여러 전문적 관점을 결합하여 더 포괄적이고 질 높은 해결책을 만들어내며, 토론 프로세스를 통해 잠재적인 문제나 개선 기회를 조기에 발견할 수 있습니다.
    
- **관련 패턴**: 역할 기반 협력, 크로스 리플렉션, 투표 기반 협력, 멀티모달 가드레일 등.
    

### 15. 멀티모달 가드레일 (Multimodal Guardrails)

- **개요**: AI 에이전트의 입출력을 제어하고, 특정 요구사항(사용자 요구, 윤리 기준, 법률 등)에 적합하게 하기 위한 패턴입니다. AI 시스템의 작동을 안전하고 신뢰할 수 있게 만들고, 바람직하지 않은 결과(유해한 영향)를 방지하기 위해 사용됩니다.
    
- **작동 절차**:
    
    1. **입력 필터링**: 부적절한 언어, 공격적 표현, 개인 정보 등을 감지하고 차단/경고합니다.
        
    2. **출력 제어**: LLM의 응답에 포함된 제품 정보, 법적 위험 가능성 있는 표현 등을 검토하고 수정합니다.
        
    3. **멀티모달 대응**: 텍스트, 이미지, 음성 등 여러 모달리티의 입출력에 대응합니다.
        
    4. **컨텍스트 인식**: 대화 이력을 고려하여 일관성 있는 답변을 유지하고, 사용자의 의도를 정확히 이해합니다.
        
    5. **윤리적 고려**: 차별적 표현이나 편향을 감지하고 중립적인 표현으로 대체합니다.
        
    6. **보안 및 개인정보 보호**: 사용자의 개인정보를 보호하고 시스템 취약점으로 이어질 수 있는 내용이 공개되지 않도록 합니다.
        
    7. **에스컬레이션**: 챗봇이 적절히 대응할 수 없는 복잡한 문제/요구를 감지하고 인간 운영자에게 에스컬레이션합니다.
        
- **특징**: AI 시스템의 작동을 제어 가능하게 하고, 신뢰성과 안전성을 향상시킵니다. 위험 감소, 브랜드 가치 보호, 사용자 경험 향상에 기여합니다.
    
- **관련 패턴**: 프롬프트/응답 옵티마이저, 크로스 리플렉션, 역할 기반 협력, 검색 증강 생성 등.
    

### 16. 도구/에이전트 레지스트리 (Tool/Agent Registry)

- **개요**: AI 에이전트 시스템 내에서 이용 가능한 다양한 도구나 에이전트(서브 에이전트)를 일원화하여 관리하고, 필요에 따라 적절한 것을 선택/호출하기 위한 패턴입니다. AI 에이전트가 더 많은 태스크에 대응하기 위한 기반이 됩니다.
    
- **구현 절차**:
    
    1. 이용 가능한 도구나 에이전트 목록을 작성하고, 각각의 기능, 사용 조건 등을 문서화합니다.
        
    2. 도구나 에이전트를 분류하고, 카테고리나 태그를 부여하여 정리합니다.
        
    3. 각 도구/에이전트에 접근하고 호출하기 위한 함수를 표준화하여 작성합니다.
        
    4. 오류 처리나 재시도 메커니즘을 구현합니다.
        
    5. 필요에 따라 도구 사용법이나 실행 조건을 프롬프트에 포함합니다.
        
    6. 새로운 도구/에이전트의 추가/제거를 쉽게 할 수 있는 메커니즘을 준비합니다.
        
    7. 도구/에이전트의 사용 통계나 성능을 모니터링하고 분석하는 메커니즘을 구현합니다.
        
- **특징**: AI 에이전트가 이용할 수 있는 도구/에이전트의 다양성을 증가시키고, 다양한 태스크에 대응할 수 있게 합니다. 도구를 확장해도 통합 비용이 적게 듭니다.
    
- **관련 패턴**: 역할 기반 협력, 멀티모달 가드레일, 프롬프트/응답 옵티마이저, 크로스 리플렉션 등.
    

### 17. 에이전트 어댑터 (Agent Adapter)

- **개요**: AI 에이전트와 외부 도구 및 시스템 간의 인터페이스를 제공하는 패턴입니다. 서로 다른 형식과 프로토콜을 가진 다양한 도구나 시스템과 AI 에이전트를 연계하는 경우에 효과적으로 활용할 수 있습니다.
    
- **구현 절차**:
    
    1. 연계 대상 외부 도구/시스템을 식별합니다.
        
    2. 각 도구/시스템의 API 사양, 데이터 형식 등을 분석합니다.
        
    3. AI 에이전트가 해당 도구를 호출하기 위한 함수를 작성합니다.
        
    4. 오류 처리나 재시도 메커니즘을 구현합니다.
        
    5. 필요에 따라 도구 사용법이나 실행 조건을 프롬프트에 포함합니다.
        
- **특징**: LangChain의 Tool 기능처럼, 외부 시스템과의 연계를 통해 에이전트의 기능을 확장하고, 다양한 도구를 활용할 수 있게 합니다.
    
- **관련 패턴**: 도구/에이전트 레지스트리, 프롬프트/응답 옵티마이저, 멀티모달 가드레일, 에이전트 평가기 등.
    

### 18. 에이전트 평가기 (Agent Evaluator)

- **개요**: AI 에이전트의 성능이나 작동을 평가하고, 그 결과를 에이전트에 피드백하는 패턴입니다. 셀프 리플렉션이나 크로스 리플렉션처럼 즉각적인 피드백이 아니라, AI 에이전트의 전반적인 작동 로그를 통해 정성 평가를 수행한 후, 구현 측면에서 AI 에이전트를 업데이트하기 위한 메커니즘입니다.
    
- **구현 절차**:
    
    1. 평가 대상 에이전트의 성능 지표를 정의하고 측정합니다.
        
    2. 평가 기준이나 목표(기능성, 효율성, 정확성 등)를 설정합니다.
        
    3. 테스트 케이스나 시나리오를 준비합니다.
        
    4. 에이전트에 대해 테스트를 실행합니다.
        
    5. 결과를 분석하고, 보고서를 생성합니다.
        
    6. 평가 결과에 기반하여 개선점이나 제안을 합니다.
        
    7. 필요에 따라 에이전트의 업데이트를 수행합니다.
        
- **특징**: 에이전트의 성능을 객관적으로 평가하고, 장기적인 개선 방안을 도출하는 데 기여합니다.
    
- **관련 패턴**: 리플렉션, 크로스 리플렉션, 휴먼 리플렉션, 멀티모달 가드레일, 프롬프트/응답 옵티마이저 등.
    

## 📌 11.3 요약

이 장에서는 18가지 에이전트 디자인 패턴에 대해 상세히 설명했습니다. 이들은 AI 에이전트 개발에서 다양한 문제에 대한 효과적인 설계 방법을 제안합니다.

- **목표 설정과 계획 생성**: 사용자의 의도를 정확히 이해하고, 이를 달성하기 위한 구체적인 계획을 수립하는 방법을 배웠습니다.
    
- **추론의 확실성 향상**: AI 에이전트 출력의 신뢰성을 높이기 위한 다양한 기법을 학습했습니다.
    
- **에이전트 간의 협력**: 여러 에이전트가 서로 협력하여 복잡한 태스크를 해결하기 위한 패턴을 배웠습니다.
    
- **입출력 제어**: AI 에이전트의 작동을 안전하고 신뢰할 수 있게 만들고, 외부 도구/에이전트 활용으로 성능을 높이기 위한 패턴을 학습했습니다.
    

이러한 에이전트 디자인 패턴은 개념적인 내용이지만, 12장에서는 LangChain/LangGraph 지식을 활용하여 간단한 구현 예시를 시도해 볼 것입니다. 이 지식을 바탕으로 다른 패턴의 구현에도 도전해 보시길 바랍니다.