### 1. 서버 내부 IP 고정 및 확인
- **내부 IP 고정:**
    - 서버(192.168.0.93)가 DHCP에 의해 변경되지 않도록, ipTIME 라우터의 DHCP 예약 기능을 사용하거나 서버 측에서 고정 IP를 설정합니다.
    - ipTIME 관리자 페이지에 로그인한 후 [네트워크 관리] → [LAN 설정] 메뉴에서 예약 IP를 지정할 수 있습니다.

---
### 2. ipTIME 라우터 관리자 페이지 접속

- **접속 방법:**
    - 웹 브라우저에 기본 게이트웨이 주소(예: http://192.168.0.1)를 입력합니다.
    - 관리자 계정(ID, 비밀번호)을 입력하여 로그인합니다.

---
### 3. 포트 포워딩(가상 서버) 설정

- **메뉴 위치:**
    - 관리자 페이지에서 [고급 설정] 또는 [보안 설정] 메뉴 내에 있는 [가상 서버] 또는 [포트 포워딩] 메뉴를 선택합니다.
- **설정 내용:**
    - **외부 포트:** 외부에서 접속할 때 사용할 포트 번호 (예: 22222, 내부 포트와 다른 번호를 선택해 보안을 강화합니다)
    - **내부 IP:** 서버의 내부 IP (예: 192.168.0.93)
    - **내부 포트:** 서버의 SSH 포트 (예: 9922)
    - **프로토콜:** TCP (SSH 접속은 TCP 프로토콜 사용)
- **설정 방법 예시:**
    1. [가상 서버 추가] 버튼 클릭
    2. "서비스명" 항목에 임의로 "SSH" 또는 "csnas" 입력
    3. "프로토콜"에서 TCP 선택
    4. "외부 포트"에 22222 입력
    5. "내부 IP"에 192.168.0.93 입력
    6. "내부 포트"에 9922 입력
    7. 설정 후 저장 및 적용

---
### 4. 서버 측 방화벽(UFW) 및 SSH 설정

- **방화벽 설정:**
```bash
# 터미널에서 현재 UFW 상태를 확인
sudo ufw status

# 포트 9922에 대해 TCP 트래픽을 허용
sudo ufw allow 9922/tcp
```
- **SSH 설정 확인:**
```bash
# SSH 설정 파일 편집
sudo nano /etc/ssh/sshd_config

# 파일 내에 `Port 9922`가 설정되어 있는지 확인하고, 없다면 추가합니다.
# 파일 저장 후 SSH 서비스 재시작
sudo systemctl restart ssh
```

---
### 5. 외부 접속 테스트 및 VSCode Remote SSH 설정

- **공인 IP 확인:**
    - ipTIME 라우터 관리자 페이지나 네트워크 담당자를 통해 학교 네트워크의 공인 IP를 확인합니다.
- **외부에서 SSH 접속 테스트:**
    - 외부 네트워크(모바일 데이터, 집 인터넷 등)에서 아래 명령어로 접속합니다.
```bash
ssh csnas@<공인_IP> -p 22222
```
- - 접속이 성공하면 포트 포워딩 설정이 올바르게 작동하는 것입니다.
- **VSCode Remote SSH 설정:**
    - 로컬의 SSH config 파일(`~/.ssh/config`)에 아래 항목을 추가합니다.
```config
Host csnas_external
    HostName <공인_IP>   # 학교 네트워크의 공인 IP
    Port 22222           # 라우터에서 지정한 외부 포트
    User csnas           # 서버 사용자명

```
VSCode에서 Remote SSH 확장을 이용해 `csnas_external` 항목을 선택하여 접속합니다.

---
# 가상환경 생성
python -m venv venv

# 가상환경 활성화 (macOS/Linux)
source venv/bin/activate

# requirements 설치
pip install -r requirements.txt

![[KKU AI TimeLINE.png]]