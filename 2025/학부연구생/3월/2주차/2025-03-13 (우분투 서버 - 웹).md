ì €ë²ˆì— ì´ì•¼ê¸° ë‚˜ì™”ë˜ ë‚´ìš©ì„ ì›¹ìœ¼ë¡œ ë§Œë“¤ì–´ì„œ ìš°ë¶„íˆ¬ ì„œë²„(ì—°êµ¬ì‹¤ ë‚´ë¶€ IP ì„¸íŒ… 192.168.0.93)ì— ì—°ê²° 
0. AINAS - PASSWD - > CEaiNAS20240301
1. ì˜ìƒ ì—…ë¡œë“œ ê¸°ëŠ¥
2. í”„ë ˆì„ ì¶”ì¶œ ê¸°ëŠ¥(1ì´ˆë‹¹ 1í”„ë ˆì„ìœ¼ë¡œ ì„¤ì •)
3. ì˜ìƒ í•˜ë‹¨ íƒ€ì„ë¼ì¸ ê¸°ëŠ¥
4. Giityì— ì½”ë“œ í‘¸ì‰¬
[ì°¸ê³ ](https://highandbrightdev.tistory.com/entry/Linux%08UBUNTU-SERVER-ssh-%EC%A0%91%EC%86%8D-%EA%B5%AC%ED%98%84-%EC%99%B8%EB%B6%80-%EC%A0%91%EC%86%8D-port-forwarding-DDNS#google_vignette)

---
![[ìŠ¤í¬ë¦°ìƒ· 2025-03-14 11.33.51.png]]
Flask(ë°±ì—”ë“œ)ì™€ HTML/CSS/JavaScript(í”„ë¡ íŠ¸ì—”ë“œ)ë¥¼ ì‚¬ìš©í•´ ë™ì˜ìƒ
ì„ ì—…ë¡œë“œí•˜ê³  í”„ë ˆì„ì„ ì¶”ì¶œí•˜ì—¬ ì›¹ìƒì—ì„œ í™•ì¸

OpenCVë¥¼ í†µí•´ 1ì´ˆ ê°„ê²©ìœ¼ë¡œ í”„ë ˆì„ì„ ì¶”ì¶œí•˜ê³ , ì—…ë¡œë“œëœ ì˜ìƒì„ ì¬ìƒ ê°€ëŠ¥

ì—…ë¡œë“œëœ ì˜ìƒê³¼ ì¶”ì¶œëœ í”„ë ˆì„ì€ static/uploads, static/frames í´ë”ì— ì €ì¥

  
---
### ğŸ“Œ ì£¼ìš” ê¸°ìˆ  ìŠ¤íƒ
í”„ë¡ íŠ¸ì—”ë“œ: HTML, CSS, JavaScript

ë°±ì—”ë“œ: Python Flask
í”„ë ˆì„ ì¶”ì¶œ: OpenCV
íŒŒì¼ ì—…ë¡œë“œ: Flask, werkzeug

---
### ì„¤ì¹˜ ë° ì‹¤í–‰ ë°©ë²•
``` bash
pip install -r requirements.txt

```

### ì„œë²„ ì‹¤í–‰
``` python
python app.py
```
#### ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸
http://127.0.0.1:5000 ì ‘ì†
ë™ì˜ìƒ íŒŒì¼ ì—…ë¡œë“œ í›„, íƒ€ì„ë¼ì¸ ì´ë¯¸ì§€ì™€ ì˜ìƒ ì¬ìƒ í™•ì¸

---  
### ê¸°ëŠ¥ 
íŒŒì¼ ì—…ë¡œë“œ: static/uploads í´ë”ì— ì €ì¥

í”„ë ˆì„ ì¶”ì¶œ: OpenCVë¡œ 1ì´ˆë§ˆë‹¤ í”„ë ˆì„ ì €ì¥ (static/frames í´ë”)

í”„ë¡ íŠ¸: ì—…ë¡œë“œ í¼, íƒ€ì„ë¼ì¸, ì˜ìƒ ì¬ìƒ UI êµ¬ì„±

ë°±ì—”ë“œ: ì—…ë¡œë“œ ë¼ìš°íŠ¸(/upload), í”„ë ˆì„ ì¶”ì¶œ ë¼ìš°íŠ¸(/extract_frames) ì œê³µ

---
### í´ë” êµ¬ì¡°
```
.

â”œâ”€â”€ app.py

â”œâ”€â”€ static

â”‚ â”œâ”€â”€ css

â”‚ â”‚ â””â”€â”€ style.css

â”‚ â”œâ”€â”€ frames

â”‚ â”œâ”€â”€ js

â”‚ â”‚ â””â”€â”€ app.js

â”‚ â””â”€â”€ uploads

â”œâ”€â”€ templates

â”‚ â””â”€â”€ index.html

â””â”€â”€ venv (ê°€ìƒí™˜ê²½ í´ë”, ì„ íƒì‚¬í•­)
```


#### app.py
```python
from flask import Flask, render_template, request, jsonify

import os

import cv2

from werkzeug.utils import secure_filename

  

app = Flask(__name__)

  

# ì„¤ì •

UPLOAD_FOLDER = 'static/uploads' # ì—…ë¡œë“œëœ ì˜ìƒ íŒŒì¼ ì €ì¥ í´ë”

FRAMES_FOLDER = 'static/frames' # ì¶”ì¶œëœ í”„ë ˆì„ ì €ì¥ í´ë”

ALLOWED_EXTENSIONS = {'mp4', 'avi', 'mov'} # í—ˆìš©ë˜ëŠ” íŒŒì¼ í˜•ì‹

app.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER

app.config['FRAMES_FOLDER'] = FRAMES_FOLDER

  

# ì—…ë¡œë“œ ê°€ëŠ¥í•œ íŒŒì¼ í˜•ì‹ í™•ì¸

def allowed_file(filename):

return '.' in filename and filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS

  

# í™ˆ í™”ë©´ ë¼ìš°íŠ¸

@app.route('/')

def index():

return render_template('index.html') # templates/index.html ë Œë”ë§

  

# íŒŒì¼ ì—…ë¡œë“œ ë¼ìš°íŠ¸

@app.route('/upload', methods=['POST'])

def upload_file():

if 'file' not in request.files:

return jsonify({'error': 'No file part'}), 400

file = request.files['file']

if file.filename == '':

return jsonify({'error': 'No selected file'}), 400

if file and allowed_file(file.filename):

filename = secure_filename(file.filename)

filepath = os.path.join(app.config['UPLOAD_FOLDER'], filename)

# ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±

if not os.path.exists(app.config['UPLOAD_FOLDER']):

os.makedirs(app.config['UPLOAD_FOLDER'])

# íŒŒì¼ ì €ì¥

file.save(filepath)

print(f"File uploaded: {filepath}") # ì—…ë¡œë“œëœ íŒŒì¼ ê²½ë¡œ í™•ì¸

return jsonify({'message': f'File uploaded successfully: {filename}', 'filename': filename}), 200

else:

return jsonify({'error': 'Invalid file type'}), 400

  

# í”„ë ˆì„ ì¶”ì¶œ ë¼ìš°íŠ¸

@app.route('/extract_frames', methods=['POST'])

def extract_frames():

video_file = request.form['video_file']

# ì˜ìƒ íŒŒì¼ ê²½ë¡œ ì„¤ì •

video_path = os.path.join(app.config['UPLOAD_FOLDER'], video_file)

if not os.path.exists(video_path):

return jsonify({'error': 'Video file not found'}), 404

# ì˜ìƒ ì´ë¦„ìœ¼ë¡œ í´ë” ìƒì„±

video_name = video_file.split('.')[0] # í™•ì¥ì ì œì™¸í•œ íŒŒì¼ ì´ë¦„

frames_folder = os.path.join(app.config['FRAMES_FOLDER'], video_name) # ì˜ìƒ ì´ë¦„ í´ë”ì— í”„ë ˆì„ ì €ì¥

if not os.path.exists(frames_folder):

os.makedirs(frames_folder)

print(f"Extracting frames from: {video_path}") # í”„ë ˆì„ ì¶”ì¶œ ê²½ë¡œ í™•ì¸

# ì˜ìƒ íŒŒì¼ ì—´ê¸°

video_capture = cv2.VideoCapture(video_path)

fps = video_capture.get(cv2.CAP_PROP_FPS) # FPS ì •ë³´ ì–»ê¸°

frame_rate = 1 # 1ì´ˆë§ˆë‹¤ 1í”„ë ˆì„ ì¶”ì¶œ

  

frame_count = 0

frame_files = []

  

while True:

ret, frame = video_capture.read()

if not ret:

break # ì˜ìƒ ëë‚˜ë©´ ì¢…ë£Œ

  

if frame_count % int(fps / frame_rate) == 0:

# í”„ë ˆì„ íŒŒì¼ëª… ìƒì„±

frame_filename = f"frame_{frame_count}.jpg"

frame_path = os.path.join(frames_folder, frame_filename)

# í”„ë ˆì„ ì´ë¯¸ì§€ ì €ì¥

cv2.imwrite(frame_path, frame)

frame_files.append(f'frames/{video_name}/{frame_filename}') # /static/frames/ì˜ìƒì´ë¦„/ê²½ë¡œ ìˆ˜ì •

  

print(f"Frame saved: {frame_path}") # ì €ì¥ëœ í”„ë ˆì„ ê²½ë¡œ ì¶œë ¥

  

frame_count += 1

  

# ì˜ìƒ íŒŒì¼ ë‹«ê¸°

video_capture.release()

  

if frame_files:

return jsonify({"frames": frame_files}), 200

else:

return jsonify({"error": "No frames extracted"}), 500

  

if __name__ == '__main__':

app.run(debug=True) # ë””ë²„ê¹… ëª¨ë“œì—ì„œ ì„œë²„ ì‹¤í–‰
```

#### app.js
```js
function setVideoSource(filePath) {

const videoSource = document.getElementById("videoSource");

videoSource.src = filePath; // ë¹„ë””ì˜¤ ê²½ë¡œ ì„¤ì •

document.getElementById("videoPlayer").load(); // ë¹„ë””ì˜¤ ìƒˆë¡œ ë¡œë“œ

}

function uploadVideo(event) {

event.preventDefault(); // í¼ ì œì¶œ ê¸°ë³¸ ë™ì‘ ë°©ì§€

const formData = new FormData();

const fileInput = document.getElementById('videoFile');

formData.append('file', fileInput.files[0]);


fetch('/upload', {

method: 'POST',

body: formData

})

.then(response => response.json())

.then(result => {

console.log(result); // ì—…ë¡œë“œ ê²°ê³¼ ì½˜ì†”ì— ì¶œë ¥

const videoFileName = fileInput.files[0].name;

// ì—…ë¡œë“œëœ ì˜ìƒì—ì„œ í”„ë ˆì„ ì¶”ì¶œ ìš”ì²­

fetch('/extract_frames', {

method: 'POST',

body: new URLSearchParams({

'video_file': videoFileName

})

})

.then(response => response.json()) // ì„œë²„ì—ì„œ í”„ë ˆì„ íŒŒì¼ ëª©ë¡ ë°›ê¸°

.then(data => {

if (data.frames) {

displayFrames(data.frames); // ë°›ì€ í”„ë ˆì„ë“¤ì„ íƒ€ì„ë¼ì¸ì— í‘œì‹œ

setVideoSource(`/static/uploads/${videoFileName}`); // ë¹„ë””ì˜¤ ì†ŒìŠ¤ ì„¤ì •

} else {

alert('í”„ë ˆì„ ì¶”ì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');

}

});

});

}

  
  

function displayFrames(frames) {

const timeline = document.getElementById('videoTimeline');

timeline.innerHTML = "";

  

frames.forEach(frame => {

const img = document.createElement('img');

// í”„ë ˆì„ íŒŒì¼ì´ .jpgë¼ë©´, ê·¸ëŒ€ë¡œ frame ë³€ìˆ˜ë¥¼ ì‚¬ìš©

img.src = `/static/frames/${frame}`;

img.alt = frame;

img.style.width = '100px';

img.style.height = 'auto';

img.style.marginRight = '5px';

img.style.cursor = 'pointer';

  

img.addEventListener('click', () => {

const frameIndex = frame.split('_')[1].split('.')[0];

const videoPlayer = document.getElementById("videoPlayer");

videoPlayer.currentTime = frameIndex / 30;

});

  

timeline.appendChild(img);

});

}


document.getElementById('uploadForm').addEventListener('submit', uploadVideo);
```

#### index.html
```html
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì˜ìƒ ì—…ë¡œë“œ ë° íƒ€ì„ë¼ì¸</title>
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
<div class="container">
<h1>ì˜ìƒ ì—…ë¡œë“œ ë° íƒ€ì„ë¼ì¸ ê¸°ëŠ¥</h1>

  

<!-- ì˜ìƒ ì—…ë¡œë“œ í¼ -->
<form id="uploadForm" enctype="multipart/form-data">
<input type="file" id="videoFile" name="file" accept="video/*" required>
<button type="submit">ì—…ë¡œë“œ</button>
</form>

  

<!-- íƒ€ì„ë¼ì¸ -->
<div id="timeline">
<p>íƒ€ì„ë¼ì¸</p>
<div id="videoTimeline"></div> <!-- í”„ë ˆì„ ì¸ë„¤ì¼ì´ í‘œì‹œë  ë¶€ë¶„ -->
</div>

  

<!-- ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ -->
<video id="videoPlayer" controls>
<source id="videoSource" type="video/mp4">
</video>
</div>

  

<script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
```

#### style.css
```css
body {
font-family: Arial, sans-serif;
}

  

.container {
max-width: 1200px;
margin: 0 auto;
padding: 20px;
text-align: center;
}

  

button {
padding: 10px;
margin-top: 10px;
cursor: pointer;
}

  

#videoTimeline {
display: flex; /* ì¸ë„¤ì¼ì„ ê°€ë¡œë¡œ ë°°ì¹˜ */
overflow-x: auto; /* ê°€ë¡œë¡œ ìŠ¤í¬ë¡¤ ê°€ëŠ¥ */
padding: 10px 0;
gap: 5px; /* ì¸ë„¤ì¼ ê°„ê²© */
justify-content: flex-start; /* ì¸ë„¤ì¼ì„ ì™¼ìª½ìœ¼ë¡œ ì •ë ¬ */
}

  

#videoTimeline img {
border-radius: 5px; /* ì¸ë„¤ì¼ ì´ë¯¸ì§€ì˜ ë‘¥ê·¼ ëª¨ì„œë¦¬ */
width: 100px; /* ì¸ë„¤ì¼ í¬ê¸° ì¡°ì • */
height: auto; /* ë¹„ìœ¨ ìœ ì§€ */
cursor: pointer; /* ì¸ë„¤ì¼ì„ í´ë¦­í•  ìˆ˜ ìˆë„ë¡ ì»¤ì„œ ì„¤ì • */
transition: transform 0.3s ease; /* í™•ëŒ€ íš¨ê³¼ */
}

  

#videoTimeline img:hover {
transform: scale(1.1); /* ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¸ì„ ë•Œ ì´ë¯¸ì§€ í™•ëŒ€ */
}
```