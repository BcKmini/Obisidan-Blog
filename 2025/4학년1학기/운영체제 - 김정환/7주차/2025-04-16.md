## 시험일정 
4/21 월요일에 오면 분반으로 시험 예정

#### race-thread 실습
```c
#define ITER (50000000)
#include <pthread.h>
#include <stdio.h>
int gvar = 0;

  
void * X(void *i);
int main(void)
{
pthread_t t1;
pthread_attr_t attr;
void *status;
int j;

pthread_create(&t1, &attr, X, NULL);
// Main thread
/////////////////////////
for (j = 0; j < ITER; j++) {
gvar = gvar + 1;
}

/////////////////////////
pthread_join(t1, &status);
printf("%d\n", gvar);

}

void * X(void *i)
{
int j;
// Child thread
/////////////////////////
for (j = 0; j < ITER; j++) {
gvar = gvar + 1;
}
/////////////////////////
pthread_exit(NULL);
}
```

1. 초기값 ITER 은 (50000000)으로 정의했다.
2. pthead를 선언한다.
3. pthread_create(&t1, &attr, X, NULL); -> 자식 스레드를 만들어 같은 주소를 가지는 자식 스레드를 생성
4. 모든 스레드가 증가시킨 총 합은 약 3,000,000
5. 프로그램이 마지막으로 출력한 gvar 값과 일치하지 않는다.
6. race condition이 발생하기에 둘이 공유하는 gvar값에 관해 + 1 더함으로 인해 일치하지 않게된다.

---
![[스크린샷 2025-04-16 17.20.42.png]]
먼저 사용한 turn이 critical section에 먼저 진입한다.
